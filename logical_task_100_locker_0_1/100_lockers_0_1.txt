"Не изобретай велосипед"
.
Ключ к разгадке — понять, что количество раз, когда шкафчик будут открывать и закрывать, 
равно количеству делителей порядкового номера этого шкафчика. 
Возьмём шкафчик 6: первый родственник откроет его, второй — закроет, третий — откроет и шестой — закроет. 
Цифры 1, 2, 3 и 6 — делители цифры 6. Поэтому если у числа чётное количество делителей, 
шкафчик останется закрытым, а если нечётное — открытым.

Большая часть шкафчиков будет иметь чётное количество делителей. 
Фактически, единственные числа с нечётным количеством делителей — полные квадраты. 
У них есть делитель, который даёт искомое число при умножении сам на себя, но мы не можем считать одно и то же число дважды. 

Таким образом, открытыми останутся шкафчики, чей порядковый номер является полным квадратом — 1, 4, 9, 16, 25, 36, 49, 64, 81 и 100.



